(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const t of o.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&i(t)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}})();const p="9652010e220a49faa3463109439e029b",g="https://api.open-meteo.com/v1/forecast";async function w(n){const r=`https://api.opencagedata.com/geocode/v1/json?q=${encodeURIComponent(n)}&key=${p}`,c=await fetch(r);if(!c.ok)throw new Error("Failed to fetch city coordinates");const i=await c.json();if(!i.results||i.results.length===0)throw new Error("City not found");const{lat:e,lng:o}=i.results[0].geometry,t=`${g}?latitude=${e}&longitude=${o}&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,weathercode&timezone=auto`,s=await fetch(t);if(!s.ok)throw new Error("Failed to fetch weather data");const a=await s.json();return a.daily.time.map((u,l)=>({date:u,maxTemp:a.daily.temperature_2m_max[l],minTemp:a.daily.temperature_2m_min[l],precipitation:a.daily.precipitation_sum[l],weatherCode:a.daily.weathercode[l]}))}const f=n=>({0:{condition:"Clear sky",icon:"â˜€ï¸"},1:{condition:"Mainly clear",icon:"ðŸŒ¤ï¸"},2:{condition:"Partly cloudy",icon:"â›…"},3:{condition:"Overcast",icon:"â˜ï¸"},45:{condition:"Fog",icon:"ðŸŒ«ï¸"},48:{condition:"Depositing rime fog",icon:"ðŸŒ«ï¸"},51:{condition:"Drizzle: Light",icon:"ðŸŒ¦ï¸"},53:{condition:"Drizzle: Moderate",icon:"ðŸŒ¦ï¸"},55:{condition:"Drizzle: Dense",icon:"ðŸŒ§ï¸"},61:{condition:"Rain: Slight",icon:"ðŸŒ§ï¸"},63:{condition:"Rain: Moderate",icon:"ðŸŒ§ï¸"},65:{condition:"Rain: Heavy",icon:"ðŸŒ§ï¸"},71:{condition:"Snow: Slight",icon:"ðŸŒ¨ï¸"},73:{condition:"Snow: Moderate",icon:"ðŸŒ¨ï¸"},75:{condition:"Snow: Heavy",icon:"â„ï¸"},80:{condition:"Rain shower(s): Slight",icon:"ðŸŒ¦ï¸"},81:{condition:"Rain shower(s): Moderate or Heavy",icon:"ðŸŒ§ï¸"},82:{condition:"Rain shower(s): Violent",icon:"ðŸŒ§ï¸"},83:{condition:"Rain and snow shower(s): Slight",icon:"ðŸŒ¨ï¸"},84:{condition:"Rain and snow shower(s): Moderate or Heavy",icon:"ðŸŒ¨ï¸"},85:{condition:"Snow shower(s): Slight",icon:"ðŸŒ¨ï¸"},86:{condition:"Snow shower(s): Moderate or Heavy",icon:"â„ï¸"},87:{condition:"Snow pellets or small hail shower(s): Slight",icon:"ðŸŒ¨ï¸"},88:{condition:"Snow pellets or small hail shower(s): Moderate or Heavy",icon:"â„ï¸"},89:{condition:"Hail shower(s): Slight",icon:"ðŸŒ©ï¸"},90:{condition:"Hail shower(s): Moderate or Heavy",icon:"ðŸŒ©ï¸"},95:{condition:"Thunderstorm: Slight or Moderate",icon:"â›ˆï¸"},96:{condition:"Thunderstorm with hail: Slight or Moderate",icon:"â›ˆï¸"},97:{condition:"Thunderstorm: Heavy",icon:"ðŸŒ©ï¸"},98:{condition:"Thunderstorm with duststorm or sandstorm",icon:"ðŸŒªï¸"},99:{condition:"Thunderstorm with heavy hail",icon:"ðŸŒ©ï¸"}})[n]||{condition:"Unknown",icon:"â“"},m=document.getElementById("unit-toggle");let d=!1;const h=n=>(d?n:n*9/5+32).toFixed(1),y=n=>d?n:(n/25.4).toFixed(2);document.getElementById("city-form").addEventListener("submit",async n=>{n.preventDefault();const r=document.getElementById("city-input").value.trim();if(!r)return;const c=document.getElementById("forecast");c.innerHTML="Loading...";try{const i=await w(r),e=t=>{const s=new Date(`${t}T00:00:00Z`);return new Intl.DateTimeFormat("en-US",{weekday:"long",month:"short",day:"2-digit",year:"numeric",timeZone:"UTC"}).format(s).replace(", ",`
`)},o=()=>{c.innerHTML=i.map(t=>{const{condition:s,icon:a}=f(t.weatherCode);return`
              <div class="forecast-card">
                <p><strong>${e(t.date)}</strong></p>
                <p>${a} <strong>${s}</strong></p>
                <p><strong>Max Temp:</strong> ${h(t.maxTemp)}Â°${d?"C":"F"}</p>
                <p><strong>Min Temp:</strong> ${h(t.minTemp)}Â°${d?"C":"F"}</p>
                <p><strong>Precipitation:</strong> ${y(t.precipitation)} ${d?"mm":"in"}</p>
              </div>
            `}).join("")};o(),m.addEventListener("change",()=>{d=m.checked,o()})}catch(i){console.error("Error fetching weather data:",i),c.innerHTML="Error fetching weather data. Please try again."}});
