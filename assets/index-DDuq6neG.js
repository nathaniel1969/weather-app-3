(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();const h="9652010e220a49faa3463109439e029b",m="https://api.open-meteo.com/v1/forecast";async function p(c){const n=`https://api.opencagedata.com/geocode/v1/json?q=${encodeURIComponent(c)}&key=${h}`,r=await fetch(n);if(!r.ok)throw new Error("Failed to fetch city coordinates");const t=await r.json();if(!t.results||t.results.length===0)throw new Error("City not found");const{lat:e,lng:o}=t.results[0].geometry,i=`${m}?latitude=${e}&longitude=${o}&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,weathercode&timezone=auto`,s=await fetch(i);if(!s.ok)throw new Error("Failed to fetch weather data");const a=await s.json();return a.daily.time.map((l,d)=>({date:l,maxTemp:a.daily.temperature_2m_max[d],minTemp:a.daily.temperature_2m_min[d],precipitation:a.daily.precipitation_sum[d],weatherCode:a.daily.weathercode[d]}))}const u=c=>({0:{condition:"Clear sky",icon:"â˜€ï¸"},1:{condition:"Mainly clear",icon:"ðŸŒ¤ï¸"},2:{condition:"Partly cloudy",icon:"â›…"},3:{condition:"Overcast",icon:"â˜ï¸"},45:{condition:"Fog",icon:"ðŸŒ«ï¸"},48:{condition:"Depositing rime fog",icon:"ðŸŒ«ï¸"},51:{condition:"Drizzle: Light",icon:"ðŸŒ¦ï¸"},53:{condition:"Drizzle: Moderate",icon:"ðŸŒ¦ï¸"},55:{condition:"Drizzle: Dense",icon:"ðŸŒ§ï¸"},61:{condition:"Rain: Slight",icon:"ðŸŒ§ï¸"},63:{condition:"Rain: Moderate",icon:"ðŸŒ§ï¸"},65:{condition:"Rain: Heavy",icon:"ðŸŒ§ï¸"},71:{condition:"Snow: Slight",icon:"ðŸŒ¨ï¸"},73:{condition:"Snow: Moderate",icon:"ðŸŒ¨ï¸"},75:{condition:"Snow: Heavy",icon:"â„ï¸"},80:{condition:"Rain shower(s): Slight",icon:"ðŸŒ¦ï¸"},81:{condition:"Rain shower(s): Moderate or Heavy",icon:"ðŸŒ§ï¸"},82:{condition:"Rain shower(s): Violent",icon:"ðŸŒ§ï¸"},83:{condition:"Rain and snow shower(s): Slight",icon:"ðŸŒ¨ï¸"},84:{condition:"Rain and snow shower(s): Moderate or Heavy",icon:"ðŸŒ¨ï¸"},85:{condition:"Snow shower(s): Slight",icon:"ðŸŒ¨ï¸"},86:{condition:"Snow shower(s): Moderate or Heavy",icon:"â„ï¸"},87:{condition:"Snow pellets or small hail shower(s): Slight",icon:"ðŸŒ¨ï¸"},88:{condition:"Snow pellets or small hail shower(s): Moderate or Heavy",icon:"â„ï¸"},89:{condition:"Hail shower(s): Slight",icon:"ðŸŒ©ï¸"},90:{condition:"Hail shower(s): Moderate or Heavy",icon:"ðŸŒ©ï¸"},95:{condition:"Thunderstorm: Slight or Moderate",icon:"â›ˆï¸"},96:{condition:"Thunderstorm with hail: Slight or Moderate",icon:"â›ˆï¸"},97:{condition:"Thunderstorm: Heavy",icon:"ðŸŒ©ï¸"},98:{condition:"Thunderstorm with duststorm or sandstorm",icon:"ðŸŒªï¸"},99:{condition:"Thunderstorm with heavy hail",icon:"ðŸŒ©ï¸"}})[c]||{condition:"Unknown",icon:"â“"};document.getElementById("city-form").addEventListener("submit",async c=>{c.preventDefault();const n=document.getElementById("city-input").value.trim();if(!n)return;const r=document.getElementById("forecast");r.innerHTML="Loading...";try{const t=await p(n);console.log("Weather Data:",t);const e=o=>{const i=new Date(`${o}T00:00:00Z`);return new Intl.DateTimeFormat("en-US",{weekday:"long",month:"short",day:"2-digit",year:"numeric"}).format(i).replace(", ",`
`)};r.innerHTML=t.map(o=>{const{condition:i,icon:s}=u(o.weatherCode);return`
      <div class="forecast-card">
        <p><strong>${e(o.date)}</strong></p>
        <p>${s} <strong>${i}</strong></p>
        <p><strong>Max Temp:</strong> ${o.maxTemp}Â°C</p>
        <p><strong>Min Temp:</strong> ${o.minTemp}Â°C</p>
        <p><strong>Precipitation:</strong> ${o.precipitation} mm</p>
      </div>
    `}).join("")}catch(t){console.error("Error fetching weather data:",t),r.innerHTML="Error fetching weather data. Please try again."}});
